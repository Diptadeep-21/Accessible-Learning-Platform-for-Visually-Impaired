{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KIIT0001\\\\Desktop\\\\Accessible-Learning-Platform-for-Visually-Impaired\\\\frontend\\\\src\\\\pages\\\\Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { speak } from '../utils/voiceUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Register = ({\n  setIsLoggedIn\n}) => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [step, setStep] = useState(0); // 0: username, 1: password, 2: confirm, 3: done\n  const lastPrompt = useRef('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const prompt = 'Welcome to registration. Please say your desired username.';\n    speak(prompt);\n    lastPrompt.current = prompt;\n    const handleCommand = e => {\n      const command = e.detail.trim();\n      if (command.includes('reset')) {\n        setUsername('');\n        setPassword('');\n        setStep(0);\n        const prompt = 'Resetting registration. Please say your desired username.';\n        speak(prompt);\n        lastPrompt.current = prompt;\n        return;\n      }\n      if (command.includes('repeat')) {\n        speak(lastPrompt.current);\n        return;\n      }\n      if (step === 0) {\n        setUsername(command);\n        setStep(1);\n        const prompt = `Username set to ${command}. Please say your desired password.`;\n        speak(prompt);\n        lastPrompt.current = prompt;\n      } else if (step === 1) {\n        setPassword(command);\n        setStep(2);\n        const prompt = 'Password set. Say \"register\" to complete registration or \"reset\" to start over.';\n        speak(prompt);\n        lastPrompt.current = prompt;\n      } else if (step === 2 && command.includes('register')) {\n        handleRegister();\n      } else if (step === 2) {\n        const prompt = 'Say \"register\" to complete registration or \"reset\" to start over.';\n        speak(prompt);\n        lastPrompt.current = prompt;\n      } else if (step === 3 && command.includes('login')) {\n        speak('Navigating to login page.');\n        navigate('/login');\n      }\n    };\n    window.addEventListener('voiceCommand', handleCommand);\n    return () => window.removeEventListener('voiceCommand', handleCommand);\n    // eslint-disable-next-line\n  }, [step, navigate]);\n  const handleRegister = async () => {\n    try {\n      await axios.post('/auth/register', {\n        username,\n        password\n      });\n      const prompt = 'Registration successful. Please say \"login\" to go to the login page.';\n      speak(prompt);\n      setStep(3);\n      lastPrompt.current = prompt;\n    } catch (err) {\n      const prompt = 'Registration failed. Please try again or say \"reset\" to start over.';\n      speak(prompt);\n      setStep(0);\n      lastPrompt.current = prompt;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"aria-live\": \"polite\",\n    children: [\"Register Page (Voice Controlled)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"(Say your username, then password, then \\\"register\\\". Say \\\"reset\\\" anytime to start over, or \\\"repeat\\\" to hear the last prompt. After successful registration, say \\\"login\\\" to go to the login page.)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(Register, \"L87BNthFMoOJP6ZLP/2iAF88QBo=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","axios","speak","jsxDEV","_jsxDEV","Register","setIsLoggedIn","_s","username","setUsername","password","setPassword","step","setStep","lastPrompt","navigate","prompt","current","handleCommand","e","command","detail","trim","includes","handleRegister","window","addEventListener","removeEventListener","post","err","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/KIIT0001/Desktop/Accessible-Learning-Platform-for-Visually-Impaired/frontend/src/pages/Register.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { speak } from '../utils/voiceUtils';\r\n\r\nconst Register = ({ setIsLoggedIn }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [step, setStep] = useState(0); // 0: username, 1: password, 2: confirm, 3: done\r\n  const lastPrompt = useRef('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const prompt = 'Welcome to registration. Please say your desired username.';\r\n    speak(prompt);\r\n    lastPrompt.current = prompt;\r\n\r\n    const handleCommand = (e) => {\r\n      const command = e.detail.trim();\r\n      if (command.includes('reset')) {\r\n        setUsername('');\r\n        setPassword('');\r\n        setStep(0);\r\n        const prompt = 'Resetting registration. Please say your desired username.';\r\n        speak(prompt);\r\n        lastPrompt.current = prompt;\r\n        return;\r\n      }\r\n      if (command.includes('repeat')) {\r\n        speak(lastPrompt.current);\r\n        return;\r\n      }\r\n\r\n      if (step === 0) {\r\n        setUsername(command);\r\n        setStep(1);\r\n        const prompt = `Username set to ${command}. Please say your desired password.`;\r\n        speak(prompt);\r\n        lastPrompt.current = prompt;\r\n      } else if (step === 1) {\r\n        setPassword(command);\r\n        setStep(2);\r\n        const prompt = 'Password set. Say \"register\" to complete registration or \"reset\" to start over.';\r\n        speak(prompt);\r\n        lastPrompt.current = prompt;\r\n      } else if (step === 2 && command.includes('register')) {\r\n        handleRegister();\r\n      } else if (step === 2) {\r\n        const prompt = 'Say \"register\" to complete registration or \"reset\" to start over.';\r\n        speak(prompt);\r\n        lastPrompt.current = prompt;\r\n      } else if (step === 3 && command.includes('login')) {\r\n        speak('Navigating to login page.');\r\n        navigate('/login');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('voiceCommand', handleCommand);\r\n    return () => window.removeEventListener('voiceCommand', handleCommand);\r\n    // eslint-disable-next-line\r\n  }, [step, navigate]);\r\n\r\n  const handleRegister = async () => {\r\n    try {\r\n      await axios.post('/auth/register', { username, password });\r\n      const prompt = 'Registration successful. Please say \"login\" to go to the login page.';\r\n      speak(prompt);\r\n      setStep(3);\r\n      lastPrompt.current = prompt;\r\n    } catch (err) {\r\n      const prompt = 'Registration failed. Please try again or say \"reset\" to start over.';\r\n      speak(prompt);\r\n      setStep(0);\r\n      lastPrompt.current = prompt;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div aria-live=\"polite\">\r\n      Register Page (Voice Controlled)\r\n      <br />\r\n      <span>\r\n        (Say your username, then password, then \"register\". Say \"reset\" anytime to start over, or \"repeat\" to hear the last prompt. After successful registration, say \"login\" to go to the login page.)\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}