{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{speak}from'../utils/voiceUtils';import{jsx as _jsx}from\"react/jsx-runtime\";const CourseList=()=>{const[courses,setCourses]=useState([]);const[selectedIndex,setSelectedIndex]=useState(-1);useEffect(()=>{const fetchCourses=async()=>{try{axios.defaults.headers.common['Authorization']=\"Bearer \".concat(localStorage.getItem('token'));const res=await axios.get('/courses');setCourses(res.data);speak(\"Found \".concat(res.data.length,\" courses. Say next to hear the next one, or select number to open.\"));}catch(err){speak('Error fetching courses.');}};fetchCourses();},[]);useEffect(()=>{const handleCommand=e=>{const command=e.detail;if(command.includes('next')){setSelectedIndex(prev=>{const next=(prev+1)%courses.length;speak(courses[next].title+'. '+courses[next].description);return next;});}else if(command.match(/select (\\d+)/)){const index=parseInt(command.match(/select (\\d+)/)[1])-1;if(index<courses.length){speak(\"Opening course: \".concat(courses[index].title));// Navigate to detail (use Router or state)\nwindow.location.href=\"/course/\".concat(courses[index]._id);}}};window.addEventListener('voiceCommand',handleCommand);return()=>window.removeEventListener('voiceCommand',handleCommand);},[courses]);return/*#__PURE__*/_jsx(\"div\",{\"aria-live\":\"polite\",children:\"Course List (Voice Navigation)\"});};export default CourseList;","map":{"version":3,"names":["React","useState","useEffect","axios","speak","jsx","_jsx","CourseList","courses","setCourses","selectedIndex","setSelectedIndex","fetchCourses","defaults","headers","common","concat","localStorage","getItem","res","get","data","length","err","handleCommand","e","command","detail","includes","prev","next","title","description","match","index","parseInt","window","location","href","_id","addEventListener","removeEventListener","children"],"sources":["C:/Users/KIIT0001/Desktop/accessible-learning-platform/frontend/src/pages/CourseList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { speak } from '../utils/voiceUtils';\r\n\r\nconst CourseList = () => {\r\n  const [courses, setCourses] = useState([]);\r\n  const [selectedIndex, setSelectedIndex] = useState(-1);\r\n\r\n  useEffect(() => {\r\n    const fetchCourses = async () => {\r\n      try {\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('token')}`;\r\n        const res = await axios.get('/courses');\r\n        setCourses(res.data);\r\n        speak(`Found ${res.data.length} courses. Say next to hear the next one, or select number to open.`);\r\n      } catch (err) {\r\n        speak('Error fetching courses.');\r\n      }\r\n    };\r\n    fetchCourses();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleCommand = (e) => {\r\n      const command = e.detail;\r\n      if (command.includes('next')) {\r\n        setSelectedIndex((prev) => {\r\n          const next = (prev + 1) % courses.length;\r\n          speak(courses[next].title + '. ' + courses[next].description);\r\n          return next;\r\n        });\r\n      } else if (command.match(/select (\\d+)/)) {\r\n        const index = parseInt(command.match(/select (\\d+)/)[1]) - 1;\r\n        if (index < courses.length) {\r\n          speak(`Opening course: ${courses[index].title}`);\r\n          // Navigate to detail (use Router or state)\r\n          window.location.href = `/course/${courses[index]._id}`;\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener('voiceCommand', handleCommand);\r\n    return () => window.removeEventListener('voiceCommand', handleCommand);\r\n  }, [courses]);\r\n\r\n  return <div aria-live=\"polite\">Course List (Voice Navigation)</div>;\r\n};\r\n\r\nexport default CourseList;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACS,aAAa,CAAEC,gBAAgB,CAAC,CAAGV,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEtDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACFT,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,CAC1F,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,CAAC,UAAU,CAAC,CACvCX,UAAU,CAACU,GAAG,CAACE,IAAI,CAAC,CACpBjB,KAAK,UAAAY,MAAA,CAAUG,GAAG,CAACE,IAAI,CAACC,MAAM,sEAAoE,CAAC,CACrG,CAAE,MAAOC,GAAG,CAAE,CACZnB,KAAK,CAAC,yBAAyB,CAAC,CAClC,CACF,CAAC,CACDQ,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAENV,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsB,aAAa,CAAIC,CAAC,EAAK,CAC3B,KAAM,CAAAC,OAAO,CAAGD,CAAC,CAACE,MAAM,CACxB,GAAID,OAAO,CAACE,QAAQ,CAAC,MAAM,CAAC,CAAE,CAC5BjB,gBAAgB,CAAEkB,IAAI,EAAK,CACzB,KAAM,CAAAC,IAAI,CAAG,CAACD,IAAI,CAAG,CAAC,EAAIrB,OAAO,CAACc,MAAM,CACxClB,KAAK,CAACI,OAAO,CAACsB,IAAI,CAAC,CAACC,KAAK,CAAG,IAAI,CAAGvB,OAAO,CAACsB,IAAI,CAAC,CAACE,WAAW,CAAC,CAC7D,MAAO,CAAAF,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIJ,OAAO,CAACO,KAAK,CAAC,cAAc,CAAC,CAAE,CACxC,KAAM,CAAAC,KAAK,CAAGC,QAAQ,CAACT,OAAO,CAACO,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CAC5D,GAAIC,KAAK,CAAG1B,OAAO,CAACc,MAAM,CAAE,CAC1BlB,KAAK,oBAAAY,MAAA,CAAoBR,OAAO,CAAC0B,KAAK,CAAC,CAACH,KAAK,CAAE,CAAC,CAChD;AACAK,MAAM,CAACC,QAAQ,CAACC,IAAI,YAAAtB,MAAA,CAAcR,OAAO,CAAC0B,KAAK,CAAC,CAACK,GAAG,CAAE,CACxD,CACF,CACF,CAAC,CACDH,MAAM,CAACI,gBAAgB,CAAC,cAAc,CAAEhB,aAAa,CAAC,CACtD,MAAO,IAAMY,MAAM,CAACK,mBAAmB,CAAC,cAAc,CAAEjB,aAAa,CAAC,CACxE,CAAC,CAAE,CAAChB,OAAO,CAAC,CAAC,CAEb,mBAAOF,IAAA,QAAK,YAAU,QAAQ,CAAAoC,QAAA,CAAC,gCAA8B,CAAK,CAAC,CACrE,CAAC,CAED,cAAe,CAAAnC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}